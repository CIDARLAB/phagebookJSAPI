!function(e){function t(e,t,n,o){this.channel=e,this.data=t,this.requestId=n,void 0!=typeof o&&(this.options=o)}function n(e,t,n,o){this.username=e,this.password=t,void 0!=typeof n&&(this.id=n),void 0!=typeof o&&(this.status=o)}function o(){return i++,i}var r={},s=new WebSocket("ws://localhost:9090/websocket/");s.messageCache=[],s.onopen=function(){console.log("websocket opened!");for(var e=0;e<s.messageCache.length;e++)s.send(s.messageCache[e]);s.messageCache=[]},s.onmessage=function(e){var t=JSON.parse(e.data),n=t.channel,o=t.requestId;if(null!==o){var s=r[n+o];void 0!==s&&(s(t.data),delete r[n+o])}},s.sendwhenready=function(e){1==s.readyState?s.send(e):(console.log("caching "+e),s.messageCache.push(e))};var i=-1;s.emit=function(e,i,a,c,u){var E=o(),d=new n(i,a,c,u),h=new t(e,d,E,null),f=Q.defer(),S=function(e){f.resolve(e)};return r[e+E]=S,s.sendwhenready(JSON.stringify(h)),f.promise},window.Phagebook=e.prototype={INPROGRESS:"INPROGRESS",APPROVED:"APPROVED",SUBMITTED:"SUBMITTED",DENIED:"DENIED",RECEIVED:"RECEIVED",createStatus:function(e,t,n){return s.emit("CREATE_STATUS",e,t,null,n)},changeOrderingStatus:function(e,t,n,o){return s.emit("CHANGE_ORDERING_STATUS",e,t,n,o)},createProjectStatus:function(e,t,n,o){return s.emit("CREATE_PROJECT_STATUS",e,t,n,o)},getProjects:function(e,t){return s.emit("GET_PROJECTS",e,t)},getOrders:function(e,t){return s.emit("GET_ORDERS",e,t)},getProject:function(e,t,n){return s.emit("GET_PROJECT",e,t,n)},getOrder:function(e,t,n){return s.emit("GET_ORDER",e,t,n)}}}(Phagebook=window.Phagebook||{});