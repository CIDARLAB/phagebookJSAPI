!function(a){function d(a,b,c,d){this.channel=a,this.data=b,this.requestId=c,void 0!=typeof d&&(this.options=d)}function f(){return e++,e}var b={},c=new WebSocket("ws://cidarlab.org:9090/websocket/");c.messageCache=[],c.onopen=function(){console.log("websocket opened!");for(var a=0;a<c.messageCache.length;a++)c.send(c.messageCache[a]);c.messageCache=[]},c.onmessage=function(a){var c=JSON.parse(a.data),d=c.channel,e=c.requestId;if(null!==e){var f=b[d+e];void 0!==f&&(f(c.data),delete b[d+e])}},c.sendwhenready=function(a){1==c.readyState?c.send(a):(console.log("caching "+a),c.messageCache.push(a))},c.FormattedData=function(a,b,c,d){this.username=a,this.password=b,void 0!=typeof c&&(this.id=c),void 0!=typeof d&&(this.status=d)};var e=-1;c.emit=function(a,e,g){var h=f(),i=new d(a,e,h,g),j=Q.defer(),k=function(a){j.resolve(a)};return b[a+h]=k,c.sendwhenready(JSON.stringify(i)),j.promise},window.Phagebook=a.prototype={INPROGRESS:"INPROGRESS",APPROVED:"APPROVED",SUBMITTED:"SUBMITTED",DENIED:"DENIED",RECEIVED:"RECEIVED",createStatus:function(a,b,d){return c.emit("CREATE_STATUS",new c.FormattedData(a,b,null,d))},changeOrderingStatus:function(a,b,d,e){return c.emit("CHANGE_ORDERING_STATUS",new c.FormattedData(a,b,d,e))},createProjectStatus:function(a,b,d,e){return c.emit("CREATE_PROJECT_STATUS",new c.FormattedData(a,b,d,e))},getProjects:function(a,b){return c.emit("GET_PROJECTS",new c.FormattedData(a,b))},getOrders:function(a,b){return c.emit("GET_ORDERS",new c.FormattedData(a,b))},getProject:function(a,b,d){return c.emit("GET_PROJECT",new c.FormattedData(a,b,d))},getOrder:function(a,b,d){return c.emit("GET_ORDER",new c.FormattedData(a,b,d))}}}(Phagebook=window.Phagebook||{});